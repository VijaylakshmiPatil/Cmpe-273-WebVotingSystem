<html>
<head>
    <title>Ballot Box</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="//netdna.bootstrapcdn.com/bootswatch/3.1.1/flatly/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
    function createPoll() {
    var question = document.getElementById("question").value;
    var op1 = document.getElementById("option1").value;
    var op2 = document.getElementById("option2").value;
    var poll = { 
    		question:$("#question").val(),
    		option1:$("#option1").val(),
    		option2:$("#option2").val(),
    		}
    	$.ajax({
		type:"POST",
		url:"/voting/poll",
		data: JSON.stringify(poll),
		contentType: "application/json",
		statusCode:{
		200: function() {
      		alert( "Poll Created" );
      		
		},
		404: function() {
		alert( "Page Not Found" );
      		
		},
		500: function() {
		alert( "Error Creating Poll" );
      		
		}
		}
		});
    }
    </script>
    <script type="text/javascript">
    var color = "#F71313";
        var default_color = "#ACB6C0";
       function frm_submit(){
			var poll_code = $.trim($("#poll_code").val());
			if(poll_code == ''){
				alert("Please enter the Poll Code");
				$("#poll_code").css("border-color",color);
				return false;
			}else{
				if(!chk_spcl_chr(poll_code)){	
					alert("Please enter a valid Poll Code");
					$("#poll_code").css("border-color",color);
					return false;
				}
				$("#poll_form").attr("action", "/voting/"+poll_code);	
				return true;
			}
			return false;
		};
		
		function chk_spcl_chr(val){
			var regex = new RegExp("^[a-zA-Z0-9 ]+$");
			var key = val;
			if (!regex.test(key)) {
			   return false;
			}
			return true;
		}
		
		</script>
</head>
<body>
    <div class="navbar navbar-default navbar-fixed-top">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/voting">Ballot Box</a>
        </div>
        <div class="navbar-collapse collapse navbar-responsive-collapse">
            <form class="navbar-form navbar-right" method="GET" onsubmit="return frm_submit();" action="/voting" id="poll_form">
				<input type="text" class="form-control col-lg-8" placeholder="Enter Code" id="poll_code" name="poll_code">
                <button id="viewPoll" type="submit" class="btn btn-success" >View Poll</button>
                <script src="../assets/js/app.js"></script>
            </form>


        </div>
    </div>
    <br />
    <br />
    <br />
    <br />

    <div class="container">
        <div class="bs-docs-section">
            <div class="row">
                <div class="col-lg-6">
                    <form class="form-horizontal" id="createPollForm">
                        <fieldset>
                            <legend>Create Poll</legend>
                            <div class="form-group">
                                <label for="inputQuest" class="col-lg-2 control-label">Question</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control" id="question" name="question" placeholder="Question">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputOp1" class="col-lg-2 control-label">Option 1</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control" id="option1" name="option1" placeholder="Option 1">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputOp2" class="col-lg-2 control-label">Option 2</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control" id="option2" name="option2" placeholder="Option 2">
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-lg-10 col-lg-offset-2">
                                    <button class="btn btn-default">Cancel</button>
                                    <button type="button" class="btn btn-primary" onclick="createPoll();">Submit</button>
                                </div>
                            </div>
                        </fieldset>
                    </form>
                </div>
                <div class="col-lg-4 col-lg-offset-1">
                    <form class="form-horizontal">
                        <fieldset>
                            <legend>Dashboard</legend>
                            <div class="form-group">
                                <label for="inputUsername" class="col-lg-6 control-label">ID of Polls you created: </label>
                            </div>
                            <table class="table table-striped table-hover ">
                            
                                    <tr>
                                        <td>
                                           
                                        </td>
                                    </tr>
                                    
                                </table>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
